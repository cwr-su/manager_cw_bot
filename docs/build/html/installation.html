

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="_static/favicons/FaviconSVG_ManagerCWBotAPI.svg" type="image/svg+xml">
    <link rel="icon" sizes="16x16" href="_static/favicons/favicon/favicon-16x16.png" type="image/png">
    <link rel="icon" sizes="32x32" href="_static/favicons/favicon/favicon-32x32.png" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="_static/favicons/favicon/apple-touch-icon-180x180.png" type="image/png">
    <link rel="mask-icon" href="_static/favicons/favicon/safari-pinned-tab.svg" color="#5bbad5" type="image/svg+xml">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Installation lib, configuration and run the bot &mdash; Manager CW Bot 6.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="_static/fonts.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Information about last update | August update!" href="info_updates.html" />
    <link rel="prev" title="Welcome to Manager CW Bot’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Manager CW Bot
          

          
            
            <img src="_static/manager_cw_bot_logo_black_and_cw-white_200pxX200px.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                6.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Methods and functions:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation lib, configuration and run the bot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#read-the-rules-instruction-for-install-lib-and-run-your-bot">Read the rules / instruction for install lib and run your bot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="info_updates.html">Information about last update | August update!</a></li>
<li class="toctree-l1"><a class="reference internal" href="analytics.html">Analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="business.html">Business</a></li>
<li class="toctree-l1"><a class="reference internal" href="business_answers.html">Business handler for answers</a></li>
<li class="toctree-l1"><a class="reference internal" href="business_handler.html">Business handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="buttons.html">Buttons</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_table.html">Create Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="fsm_handler.html">Handler of FSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_bot_json.html">Example of a bot.json file</a></li>
<li class="toctree-l1"><a class="reference internal" href="get_business_conn_and_info_conn.html">Get business connection and info conn</a></li>
<li class="toctree-l1"><a class="reference internal" href="giga_images.html">Giga Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="giga_request.html">Giga Request</a></li>
<li class="toctree-l1"><a class="reference internal" href="gigachatai.html">Giga Chat AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="handler_db_sub_operations.html">Handler database and subscribe operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="handler_email.html">Handler EMail</a></li>
<li class="toctree-l1"><a class="reference internal" href="handler_email_sender.html">Handler EMail-Sender</a></li>
<li class="toctree-l1"><a class="reference internal" href="handler_promo.html">Handler promo data</a></li>
<li class="toctree-l1"><a class="reference internal" href="handler_successful_payment.html">Handler successful payment</a></li>
<li class="toctree-l1"><a class="reference internal" href="handler_yookassa.html">Handler Yookassa</a></li>
<li class="toctree-l1"><a class="reference internal" href="mysql_connection.html">MySQL Connector</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdf_generate_data.html">PDF Generate Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="refund.html">Handler refund</a></li>
<li class="toctree-l1"><a class="reference internal" href="send_invoice.html">Handler send invoice</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Tests (UnitTest)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tickets.html">Tickets</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Manager CW Bot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Installation lib, configuration and run the bot</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="installation-lib-configuration-and-run-the-bot">
<h1>Installation lib, configuration and run the bot<a class="headerlink" href="#installation-lib-configuration-and-run-the-bot" title="Permalink to this heading"><span>#</span></a></h1>
<section id="read-the-rules-instruction-for-install-lib-and-run-your-bot">
<h2>Read the rules / instruction for install lib and run your bot<a class="headerlink" href="#read-the-rules-instruction-for-install-lib-and-run-your-bot" title="Permalink to this heading"><span>#</span></a></h2>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you still haven’t installed the library, use the pip command:</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">manager_cw_bot_api</span></code></p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Before running the file, make sure that you have received the API key from <a class="reference external" href="https://t.me/BotFather">&#64;BotFather</a> <a class="brackets" href="#id5" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>,
data for connecting to MySQL, business_connection_id (after enabling Business mode
in <a class="reference external" href="https://t.me/BotFather">&#64;BotFather</a>).</p>
<p>Instructions for connecting the bot <a class="brackets" href="#id6" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>:</p>
<ol class="arabic simple">
<li><p>Create a file in your project directory: <code class="docutils literal notranslate"><span class="pre">bot.json</span></code> (<a class="reference external" href="./example_bot_json.html">example here</a>).</p></li>
<li><p>Create a file <code class="docutils literal notranslate"><span class="pre">main.py</span></code> (in the same directory) and go to it.</p></li>
<li><p>Write the following code in it (replacing YOUR_TOKEN with your bot’s token received from <a class="reference external" href="https://t.me/BotFather">&#64;BotFather</a>) (1):</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span> <span class="nn">manager_cw_bot_api</span> <span class="kn">import</span> <span class="n">get_business_conn_and_info_conn</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k">def</span> <span class="nf">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">4</span>    <span class="nb">print</span><span class="p">(</span><span class="n">get_business_conn_and_info_conn</span><span class="o">.</span><span class="n">gets</span><span class="p">(</span><span class="s2">&quot;YOUR_TOKEN&quot;</span><span class="p">))</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">7</span>    <span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Add a folder called <code class="docutils literal notranslate"><span class="pre">styles</span></code> to the directory with the <code class="docutils literal notranslate"><span class="pre">bot.json</span></code> and <code class="docutils literal notranslate"><span class="pre">main.py</span></code> . Next, you need to add 5 to it files:</p></li>
</ol>
<ul class="simple">
<li><p>3 files with fonts of REGULAR, BOLD, ITALIC types, <code class="docutils literal notranslate"><span class="pre">.ttf</span></code> format.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">.png</span></code> file with a stamp/seal for CW documents and a <code class="docutils literal notranslate"><span class="pre">.png</span></code> logo file. - YOU CAN GET ALL THESE FILES FOR FREE <a class="reference external" href="https://acdn.cwr.su/src/storage/zip_file_styles/">HERE</a>.</p></li>
</ul>
<ol class="arabic simple" start="5">
<li><p>Before executing the code, read the more detailed instructions here: <a class="reference external" href="./get_business_conn_and_info_conn.html">Get Business connection and info connection-obj</a>.</p></li>
<li><p>To find out the GIGACHAT API (RU / EN) data, you need to visit the website: <a class="reference external" href="https://developers.sber.ru/studio/workspaces/">https://developers.sber.ru/studio/workspaces/</a> and then their API, in order to get the TOKEN: <a class="reference external" href="https://developers.sber.ru/docs/ru/gigachat/api/reference/rest/post-token">https://developers.sber.ru/docs/ru/gigachat/api/reference/rest/post-token</a> . The rest of the data (AUTH_TOKEN (for entering into the bot.json file), client_secret and client_id (id is your EMail address that you specified during registration)) you need to get it in your personal account. To do this, FOLLOW the INSTRUCTIONS of the official SBER API: <a class="reference external" href="https://developers.sber.ru/docs/ru/gigachat/individuals-quickstart">https://developers.sber.ru/docs/ru/gigachat/individuals-quickstart</a> (for phys. persons / self-employed) or <a class="reference external" href="https://developers.sber.ru/docs/ru/gigachat/legal-quickstart">https://developers.sber.ru/docs/ru/gigachat/legal-quickstart</a> (for legal entities, sole proprietors, and organizations).</p></li>
<li><p>Next, once you have received the data to insert into the bot.json (<a class="reference external" href="./example_bot_json.html">bot.json</a>) - clear the main.py and enter the following in it (2):</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 2</span><span class="sd">Main Module of the Manager and helper-bot-manager.</span>
<span class="linenos"> 3</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 4</span><span class="kn">import</span> <span class="nn">logging</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="linenos"> 6</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos"> 7</span><span class="kn">from</span> <span class="nn">manager_cw_bot_api.business</span> <span class="kn">import</span> <span class="n">run</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c1"># Do not break the structure of func-s, classes, and components to make the modules work correctly.</span>
<span class="linenos">11</span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">12</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Main Function (run bot).&quot;&quot;&quot;</span>
<span class="linenos">13</span>    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="linenos">14</span>        <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
<span class="linenos">15</span>        <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="linenos">16</span>        <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(levelname)s</span><span class="s1">: </span><span class="si">%(asctime)s</span><span class="s1"> -- </span><span class="si">%(funcName)s</span><span class="s1"> -- </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
<span class="linenos">17</span>        <span class="n">datefmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%m-%Y %H:%M:%S&#39;</span>
<span class="linenos">18</span>    <span class="p">)</span>
<span class="linenos">19</span>
<span class="linenos">20</span>    <span class="k">await</span> <span class="n">run</span><span class="p">()</span>
<span class="linenos">21</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">24</span>    <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<p>Familiarize yourself with this rule to create the configuration
(in the file) of the bot.</p>
<p>If you have any questions, please contact us by email: <a class="reference external" href="mailto:help&#37;&#52;&#48;cwr&#46;su">help<span>&#64;</span>cwr<span>&#46;</span>su</a>.</p>
</div>
<hr class="docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id5" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>&#64;BotFather. The bot that allows you (as an admin) to control
the bot(s): create/delete
them, change their settings, etc.</p>
</aside>
<aside class="footnote brackets" id="id6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p>Telegram Bot API. API for the telegram bot(s).
An API key is required for use (both through requests and
through third-party libraries: pyTelegramBotAPI, aiogram and others)</p>
</aside>
</aside>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="info_updates.html" class="btn btn-neutral float-right" title="Information about last update | August update!" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to Manager CW Bot’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2024, Alexander Laptev, CW.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>